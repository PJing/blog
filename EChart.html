<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>ECharts</title>
		<script src="https://cdn.bootcss.com/jquery/2.2.0/jquery.min.js"></script>
		<script src="https://cdn.bootcss.com/echarts/3.6.2/echarts.min.js"></script>
		<link href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.css" rel="stylesheet">
	</head>
	<body>
		<h1 class="text-center">ECharts学习</h1><br />
		<div class="container-fluid row">
			<div class="col-lg-6" id="main" style="width: 600px;height: 400px;"></div>
			<div class="col-lg-6" id="main2" style="width: 600px;height: 400px;"></div>
		</div>
		<script type="text/javascript">
			
			var myChart = echarts.init(document.getElementById('main'))
			
			$.get('data.json').done(function(data){
				console.log(data);
				var name = [];
				var num = [];
				for(var i=0; i<data.length;i++){
					name.push(data[i].name);
					num.push(data[i].data)
				}
				console.log(name,num);
				//写入数据
				
				setInterval(function(){
					var num1=[];
					for(var i=0;i<5;i++){
						num1.push(parseInt(Math.random()*10))
					}
					setData(name,num1)
				},2000)
			})
			
			function setData(name,num){
			
				var option = {
					title:{
						text:"ECharts 入门示例"
					},
					tooltip:{},
					legend:{
						data:['销量']
					},
					xAxis:{
						data:name
					},
					yAxis:{},
					series:[{
						name:'销量',
						type:'bar',
						data:num
					}]
				}
				
				//使用刚制定的配置项和数据显示图表
				myChart.setOption(option);
			}
			
			var myChart2 = echarts.init(document.getElementById('main2'));
			
			
			var option2 = {
				title:{
					text:'这里是南丁格尔图'
					},
				series:[
					{
						name:"访问来源",
						type:"pie",
						radius:"50%",
						data:[
							{value:234,name:'视频广告'},
							{value:274,name:'联盟告告'},
							{value:310,name:'邮件营销'},
							{value:335,name:'直接访问'},
							{value:400,name:'搜索引擎'}
						]
					}
				],
				roseType:'angle'
			}
			myChart2.setOption(option2)
			
		</script>
	</body>
</html>
